{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n//================Задаємо стилі\nconst head = document.head;\nconst style = document.createElement('style');\nstyle.innerHTML = `span{\n            font-size: 20px;\n        }\n        [data-days],[data-hours],[data-minutes],[data-seconds]{\n            font-size: 40px;\n        }\n        .field{\n            display: flex;\n            flex-direction: column;\n            margin-right: 20px;\n            text-align: center;\n        }        \n        .label{\n            text-transform: uppercase;\n            font-size: 14px;\n        }\n        button{\n          font-size: 18px;\n        }\n        #datetime-picker{\n          font-size: 18px;\n          margin-bottom: 20px;\n        }\n        .timer{\n          display: flex;\n        }\n        .field{\n          display: flex;\n          flex-direction = \"column\";\n        }\n        `\n  ;\nhead.appendChild(style);\n//=========================================\n\n  const dateTimeInput = document.getElementById(\"datetime-picker\");\n  const btn = document.querySelector('button[data-start]');//Кнопка\n  btn.style.pointerEvents= \"none\"; //Забороняємо кликати по кнопці\n  btn.style.opacity = \"0.5\";\n  document.addEventListener(\"DOMContentLoaded\", function () {\n  // Получаем текущую дату и время в часовом поясе Украины\n  const now = new Date();\n      const formatter = new Intl.DateTimeFormat(\"uk-UA\", {\n        year: \"numeric\", month: \"2-digit\", day: \"2-digit\", hour: \"2-digit\", minute: \"2-digit\",\n        hour12: false, timeZone: \"Europe/Kyiv\",});\n \n    const parts = formatter.formatToParts(now);\n  // Собираем дату в нужном формате\n  const day = parts.find(p => p.type === \"day\").value;\n  const month = parts.find(p => p.type === \"month\").value;\n  const year = parts.find(p => p.type === \"year\").value;\n  const hour = parts.find(p => p.type === \"hour\").value;\n  const minute = parts.find(p => p.type === \"minute\").value;\n\n  const formattedDateTime = `${year}-${month}-${day} ${hour}:${minute}`;\n  dateTimeInput.value = formattedDateTime; // Устанавливаем в input\n});\n//================================ Обираємо дату з календаря\nlet userSelectedDate;\nlet dateMs;\nflatpickr(\"#datetime-picker\", {\n  enableTime: true, // Якщо потрібен вибір часу\n  dateFormat: \"Y-m-d H:i\", // Формат дати\n  minuteIncrement: 1,\n  onClose: function(selectedDates) {\n    if (selectedDates.length > 0) {\n      const selectedDate = selectedDates[0]; // =========== Отримуємо першу обрану дату\n    dateMs=selectedDate.getTime();\n      const now = new Date(); // Поточна дата\n        // Застосовуємо бібліотеку для повідомлення про помилково обрану дату\n      if (selectedDate < now) {\n          iziToast.error({\n              title: 'Error',\n              message: 'Please choose a date in the future!',\n              position: 'topRight',\n          });\n        userSelectedDate = null; // Очищаємо значення\n      } else {\n        btn.style.pointerEvents= \"auto\"; //Включає активність кнопки\n        btn.style.opacity = \"1.0\";//Знімаємо обмеження на колір\n        userSelectedDate = selectedDate; // Зберігаємо обрану дату\n        dateMs = userSelectedDate.getTime();\n      }\n    }\n  }\n});\n// ======================= Змінним призначаємо елементи DOM\nconst daysNew = document.querySelector('span[data-days]');\nconst hoursNew = document.querySelector('span[data-hours]');\nconst minutesNew = document.querySelector('span[data-minutes]');\nconst secondsNew = document.querySelector('span[data-seconds]');\nlet result = 0;\n\n//=============================Натискаємо кнопку\nbtn.addEventListener('click', () => { \n      dateTimeInput.style.pointerEvents= \"none\"; //Блокуємо input\n      dateTimeInput.style.opacity = \"0.5\";\n      let dateNew = Date.now();\n      let intervalId=setInterval(() => {\n        dateNew = Date.now();\n        result = dateMs - dateNew;\n      if (result === -1) { clearInterval(intervalId); }\n          daysNew.textContent = `0${convertMs(result).days}`.slice(-3);   \n          hoursNew.textContent = `0${convertMs(result).hours}`.slice(-2);\n          minutesNew.textContent = `0${convertMs(result).minutes}`.slice(-2);\n          secondsNew.textContent = `0${convertMs(result).seconds}`.slice(-2);    \n      }, 1000);\n  btn.style.pointerEvents= \"none\"; //Забороняємо кликати по кнопці\n  btn.style.opacity = \"0.5\";\n}  \n)\n//===============================Конвертуємо ms в дні години хвилини секунди\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour+2);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds};\n}\n"],"names":["head","style","dateTimeInput","btn","now","parts","day","p","month","year","hour","minute","formattedDateTime","userSelectedDate","dateMs","flatpickr","selectedDates","selectedDate","iziToast","daysNew","hoursNew","minutesNew","secondsNew","result","dateNew","intervalId","convertMs","ms","days","hours","minutes","seconds"],"mappings":"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"}