{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n//================Задаємо стилі\nconst head = document.head;\nconst style = document.createElement('style');\nstyle.innerHTML = `span{\n            font-size: 20px;\n        }\n        [data-days],[data-hours],[data-minutes],[data-seconds]{\n            font-size: 40px;\n        }\n        .field{\n            display: flex;\n            flex-direction: column;\n            margin-right: 20px;\n            text-align: center;\n        }        \n        .label{\n            text-transform: uppercase;\n            font-size: 14px;\n        }\n        button{\n          font-size: 18px;\n        }\n        #datetime-picker{\n          font-size: 18px;\n          margin-bottom: 20px;\n        }\n        .timer{\n          display: flex;\n        }\n        .field{\n          display: flex;\n          flex-direction = \"column\";\n        }\n        `\n  ;\nhead.appendChild(style);\n//=========================================\n\nconst dateTimeInput = document.getElementById(\"datetime-picker\");\nconst btn = document.querySelector('button[data-start]');//Кнопка\nbtn.style.pointerEvents = \"none\"; //Забороняємо кликати по кнопці\nbtn.style.opacity = \"0.5\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  // Отримуємо поточну дату і час в годинниковому поясі Украини\n  const now = new Date();  \n  const formattedDateTime = now.toISOString().slice(0, 16).replace(\"T\", \" \");\n  dateTimeInput.value = formattedDateTime;\n});\nlet dateMs;\nflatpickr(\"#datetime-picker\", {\n  enableTime: true,\n  time_24hr: true, \n  dateFormat: \"Y-m-d H:i\", \n  minuteIncrement: 1,\n  defaultDate: new Date(),\n  minDate: \"today\",\n  onClose: function(selectedDates) {\n    if (selectedDates.length > 0) {\n      const selectedDate = selectedDates[0]; \n      dateMs = selectedDate.getTime();\n      if (selectedDate < new Date()) {\n        iziToast.error({\n          title: 'Помилка',\n          message: 'Оберіть дату у майбутньому!',\n          position: 'topRight',\n        });\n        dateTimeInput.value = \"\"; \n        btn.style.pointerEvents = \"none\"; \n        btn.style.opacity = \"0.5\";\n      } else {\n        btn.style.pointerEvents = \"auto\"; \n        btn.style.opacity = \"1.0\";\n      }\n    }\n  }\n});\nconst daysNew = document.querySelector('span[data-days]');\nconst hoursNew = document.querySelector('span[data-hours]');\nconst minutesNew = document.querySelector('span[data-minutes]');\nconst secondsNew = document.querySelector('span[data-seconds]');\n//Натискаємо кнопку Старт\nbtn.addEventListener('click', () => { \n  dateTimeInput.style.pointerEvents = \"none\";\n  dateTimeInput.style.opacity = \"0.5\";\n  let intervalId = setInterval(() => {\n    let result = dateMs - Date.now();\n    if (result <= 0) { \n      clearInterval(intervalId);\n      daysNew.textContent = \"00\";    \n      hoursNew.textContent = \"00\";\n      minutesNew.textContent = \"00\";\n      secondsNew.textContent = \"00\";\n      dateTimeInput.style.pointerEvents = \"auto\"; \n      dateTimeInput.style.opacity = \"1.0\";\n      btn.style.pointerEvents = \"auto\";\n      btn.style.opacity = \"1.0\";\n      return;\n    }\n    //Конвертуємо мілісекунди\n    const time = convertMs(result);\n    daysNew.textContent = `0${time.days}`.slice(-3);   \n    hoursNew.textContent = `0${time.hours}`.slice(-2);\n    minutesNew.textContent = `0${time.minutes}`.slice(-2);\n    secondsNew.textContent = `0${time.seconds}`.slice(-2);\n  }, 1000);\n  btn.style.pointerEvents = \"none\"; //Робимо кнопку неактивною \n  btn.style.opacity = \"0.5\";\n});\n\nfunction convertMs(ms) {\n  const second = 1000, minute = second * 60, hour = minute * 60, day = hour * 24;\n  return {\n    days: Math.floor(ms / day),\n    hours: Math.floor((ms % day) / hour),\n    minutes: Math.floor(((ms % day) % hour) / minute),\n    seconds: Math.floor((((ms % day) % hour) % minute) / second)\n  };\n}\n"],"names":["head","style","dateTimeInput","btn","formattedDateTime","dateMs","flatpickr","selectedDates","selectedDate","iziToast","daysNew","hoursNew","minutesNew","secondsNew","intervalId","result","time","convertMs","ms"],"mappings":"2GAMA,MAAMA,EAAO,SAAS,KAChBC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAgClBD,EAAK,YAAYC,CAAK,EAGtB,MAAMC,EAAgB,SAAS,eAAe,iBAAiB,EACzDC,EAAM,SAAS,cAAc,oBAAoB,EACvDA,EAAI,MAAM,cAAgB,OAC1BA,EAAI,MAAM,QAAU,MAEpB,SAAS,iBAAiB,mBAAoB,UAAY,CAGxD,MAAMC,EADM,IAAI,OACc,YAAW,EAAG,MAAM,EAAG,EAAE,EAAE,QAAQ,IAAK,GAAG,EACzEF,EAAc,MAAQE,CACxB,CAAC,EACD,IAAIC,EACJC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,WAAY,YACZ,gBAAiB,EACjB,YAAa,IAAI,KACjB,QAAS,QACT,QAAS,SAASC,EAAe,CAC/B,GAAIA,EAAc,OAAS,EAAG,CAC5B,MAAMC,EAAeD,EAAc,CAAC,EACpCF,EAASG,EAAa,UAClBA,EAAe,IAAI,MACrBC,EAAS,MAAM,CACb,MAAO,UACP,QAAS,8BACT,SAAU,UACpB,CAAS,EACDP,EAAc,MAAQ,GACtBC,EAAI,MAAM,cAAgB,OAC1BA,EAAI,MAAM,QAAU,QAEpBA,EAAI,MAAM,cAAgB,OAC1BA,EAAI,MAAM,QAAU,MAEvB,CACF,CACH,CAAC,EACD,MAAMO,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAa,SAAS,cAAc,oBAAoB,EAE9DV,EAAI,iBAAiB,QAAS,IAAM,CAClCD,EAAc,MAAM,cAAgB,OACpCA,EAAc,MAAM,QAAU,MAC9B,IAAIY,EAAa,YAAY,IAAM,CACjC,IAAIC,EAASV,EAAS,KAAK,IAAG,EAC9B,GAAIU,GAAU,EAAG,CACf,cAAcD,CAAU,EACxBJ,EAAQ,YAAc,KACtBC,EAAS,YAAc,KACvBC,EAAW,YAAc,KACzBC,EAAW,YAAc,KACzBX,EAAc,MAAM,cAAgB,OACpCA,EAAc,MAAM,QAAU,MAC9BC,EAAI,MAAM,cAAgB,OAC1BA,EAAI,MAAM,QAAU,MACpB,MACD,CAED,MAAMa,EAAOC,EAAUF,CAAM,EAC7BL,EAAQ,YAAc,IAAIM,EAAK,IAAI,GAAG,MAAM,EAAE,EAC9CL,EAAS,YAAc,IAAIK,EAAK,KAAK,GAAG,MAAM,EAAE,EAChDJ,EAAW,YAAc,IAAII,EAAK,OAAO,GAAG,MAAM,EAAE,EACpDH,EAAW,YAAc,IAAIG,EAAK,OAAO,GAAG,MAAM,EAAE,CACrD,EAAE,GAAI,EACPb,EAAI,MAAM,cAAgB,OAC1BA,EAAI,MAAM,QAAU,KACtB,CAAC,EAED,SAASc,EAAUC,EAAI,CAErB,MAAO,CACL,KAAM,KAAK,MAAMA,EAAK,KAAG,EACzB,MAAO,KAAK,MAAOA,EAAK,MAAO,IAAI,EACnC,QAAS,KAAK,MAAQA,EAAK,MAAO,KAAQ,GAAM,EAChD,QAAS,KAAK,MAASA,EAAK,MAAO,KAAQ,IAAU,GAAM,CAC/D,CACA"}